{"version":3,"sources":["lib/viewport-detection.es6.js"],"names":[],"mappings":";;;;;;AACA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;IAEtB,iBAAiB;eAAjB,iBAAiB;;WAER,qBAAC,CAAC,EAAC;AACZ,UAAG,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAC;AACjB,YAAI,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;AAChC,YAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC,EAAE,EAAC,CAAC,EAAE,EAAE,EAAC,EAAE,EAAC,CAAC,CAAC;OACpC,MAAM;AACL,cAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;OACnC;;AAED,aAAO,EAAE,CAAC;KACX;;;AAEU,WAbT,iBAAiB,CAaP,EAAE,EAAC;0BAbb,iBAAiB;;AAcjB,QAAI,CAAC,WAAW,GAAG;AACjB,YAAM,EAAC,EAAC,EAAE,EAAC,CAAC,EAAE,EAAE,EAAC,GAAG,EAAC;AACrB,YAAM,EAAC,EAAC,EAAE,EAAC,GAAG,EAAE,EAAE,EAAC,GAAG,EAAC;AACvB,aAAO,EAAC,EAAC,EAAE,EAAC,GAAG,EAAE,EAAE,EAAC,KAAK,EAAC;KAC3B,CAAC;AACF,QAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AACtB,QAAI,CAAC,SAAS,GAAO,EAAE,CAAC;AACxB,QAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAG,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,EAAC;AAClB,UAAI,CAAC,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;KAChC;GAEF;;eA1BC,iBAAiB;;WA4BR,qBAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAC;AACpB,UAAG,EAAE,KAAK,KAAK,IAAI,CAAC,IAAI,EAAE,EAAC;AACzB,eAAO,IAAI,CAAC;OACb;;AAED,aAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAE;KAC7B;;;WAGQ,qBAAE;;;AACT,UAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC;AACvC,UAAI,MAAM,GAAG,SAAS,CAAC;;AAEvB,OAAC,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,CAAC,EAAE,CAAC,EAAG;AAC/B,YAAG,MAAK,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAC;AACvC,gBAAM,GAAG,CAAC,CAAC;SACb;OACH,CAAC,CAAC;;AAEH,aAAO,MAAM,CAAC;KACf;;;WAEO,kBAAC,CAAC,EAAC;AACT,UAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAC;AACf,YAAI,CAAC,YAAY,GAAG,CAAC,CAAC;OACvB;AACD,aAAO,IAAI,CAAC,YAAY,CAAC;KAC1B;;;WAEQ,qBAAE;AACT,aAAO,IAAI,CAAC,EAAE,CAAC;KAChB;;;WAEG,gBAAE;;;AACH,UAAI,OAAO,GAAG,CAAA,YAAI;AACf,eAAK,QAAQ,EAAE,CAAC;OAClB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEb,YAAM,CAAC,gBAAgB,CACpB,QAAQ,EAAE,OAAO,EAAE,KAAK,CACzB,CAAC;;AAEH,YAAM,CAAC,gBAAgB,CACpB,mBAAmB,EAAE,OAAO,EAAE,KAAK,CACpC,CAAC;KACL;;;WAEY,yBAAE;;AAEX,UAAI,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,IAAI,MAAM,CAAC,SAAS,CAAC,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC;;;AAG/E,aAAO,AAAC,+DAA8D,CAAE,IAAI,CAAC,EAAE,CAAC;QAAC;KACpF;;;WAEa,wBAAC,EAAE,EAAC;AAChB,aAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,UAAS,EAAE,EAAE;AAC3C,eAAO,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;OACrB,CAAC,CAAC;KAEJ;;;WAEO,oBAAE;AACR,UAAI,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;AAChC,UAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC;AAChC,YAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;OAC5B;KACF;;;WAEW,sBAAC,IAAI,EAAC;AAChB,UAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACxC,OAAC,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,KAAK,EAAG;AACjC,aAAK,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;OACxB,CAAC,CAAC;KACJ;;;WAES,oBAAC,CAAC,EAAC;AACX,UAAG,IAAI,CAAC,YAAY,KAAK,CAAC,EAAC;AACzB,eAAO,KAAK,CAAC;OACd;;AAED,UAAI,CAAC,YAAY,GAAG,CAAC,CAAC;AACtB,aAAO,IAAI,CAAC;KACb;;;WAEW,wBAAE;AACZ,aAAO,MAAM,CAAC,KAAK,CAAC;KACrB;;;WAEQ,mBAAC,QAAQ,EAAC;AACjB,UAAI,EAAE,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;AAEpC,UAAG,CAAC,IAAI,CAAC,aAAa,EAAC;AACpB,cAAM,CAAC,gBAAgB,CACtB,kBAAkB,EAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EACpB,KAAK,CACN,CAAC;OACH;;AAED,aAAO,EAAE,CAAC;KACX;;;WAES,sBAAE;AACV,aAAO;AACL,cAAM,EAAG,MAAM,CAAC,WAAW;AAC3B,aAAK,EAAI,MAAM,CAAC,UAAU;OAC3B,CAAC;KACH;;;SAxIC,iBAAiB;;;AA2IvB,MAAM,CAAC,OAAO,GAAG,iBAAiB,CAAC","file":"index.js","sourcesContent":["\nconst _ = require(\"lodash\");\n\nclass ViewportDetection {\n\n    addCallback(c){\n      if(_.isFunction(c)){\n        var id = this.id = _.uniqueId();\n        this.callbacks.push({cb:c, id:id});\n      } else {\n        throw new Error(\"Not a function\");\n      }\n\n      return id;\n    }\n\n    constructor(cb){\n      this.breakpoints = {\n        mobile:{st:0, fn:767},\n        tablet:{st:768, fn:992},\n        desktop:{st:993, fn:\"max\"}\n      };\n      this.currentWidth = 0;\n      this.callbacks     = [];\n      this.trackerCalled = false;\n      if(_.isFunction(cb)){\n        this.id = this.addCallback(cb);\n      }\n\n    }\n\n    checkWidths(w, st, fn){\n      if(fn === \"max\" && w >= st){\n        return true;\n      }\n\n      return (w >= st && w <= fn);\n    }\n\n\n    getDevice(){\n      let winWidth = this.windowSize().width;\n      let device = \"desktop\";\n\n      _.forIn(this.breakpoints, (v, k)=>{\n         if(this.checkWidths(winWidth, v.st, v.fn)){\n            device = k;\n         }\n      });\n\n      return device;\n    }\n\n    getWidth(w){\n      if(_.isNumber(w)){\n        this.currentWidth = w;\n      }\n      return this.currentWidth;\n    }\n\n    getLastId(){\n      return this.id;\n    }\n\n    init(){\n       let tracker = ()=>{\n          this.resizeFn();\n       }.bind(this);\n\n       window.addEventListener(\n          \"resize\", tracker, false\n        );\n\n       window.addEventListener(\n          \"orientationchange\", tracker, false\n        );\n    }\n\n    isSmartDevice(){\n        // Adapted from http://www.detectmobilebrowsers.com\n        let ua = window.navigator.userAgent || window.navigator.vendor || window.opera;\n\n        //Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices\n        return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);\n    }\n\n    removeCallback(id){\n      return _.remove(this.callbacks, function(cb) {\n        return cb.id === id;\n      });\n\n    }\n\n    resizeFn(){\n      let sizeObj = this.windowSize();\n      if(this.sizeChange(sizeObj.width)){\n        this.runCallBacks(sizeObj);\n      }\n    }\n\n    runCallBacks(size){\n      let device = this.getDevice(size.width);\n      _.forEach(this.callbacks, (calls)=>{\n        calls.cb(device, size);\n      });\n    }\n\n    sizeChange(w){\n      if(this.currentWidth === w){\n        return false;\n      }\n\n      this.currentWidth = w;\n      return true;\n    }\n\n    touchSupport(){\n      return window.touch;\n    }\n\n    trackSize(callback){\n      let id = this.addCallback(callback);\n\n      if(!this.trackerCalled){\n         window.addEventListener(\n          \"DOMContentLoaded\",\n          this.init.bind(this),\n          false\n        );\n      }\n\n      return id;\n    }\n\n    windowSize(){\n      return {\n        height : window.innerHeight,\n        width  : window.innerWidth\n      };\n    }\n}\n\nmodule.exports = ViewportDetection;\n"]}